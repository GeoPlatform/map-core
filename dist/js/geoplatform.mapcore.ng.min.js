"use strict";function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(r,t,o){return t&&e(r.prototype,t),o&&e(r,o),r}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,r){"function"==typeof define&&define.amd?define(["Q","angular","GeoPlatform","ItemService"],function(t,o,n,i){return e.NGItemService=r(t,o,n,i)}):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e.NGItemService=r(require("Q"),require("angular"),require("GeoPlatform"),require("ItemService")):GeoPlatform.NGItemService=r(Q,angular,GeoPlatform,GeoPlatform.ItemService)}(window,function(e,r,t,o){return function(){function o(){if(_classCallCheck(this,o),void 0===r)throw new Error("Angular not defined");this.baseUrl=t.ualUrl+"/api/items"}return _createClass(o,[{key:"get",value:function(t){var o=r.injector(["ng"]).get("$http");if(void 0===o)throw new Error("Angular $http not resolved");return o.get(this.baseUrl+"/"+t).then(function(e){return e.data}).catch(function(r){var t="NGItemService.get() - Error fetching item: "+r.message,o=new Error(t);return e.reject(o)})}},{key:"save",value:function(t){var o={method:"POST",url:this.baseUrl,data:t};t.id&&(o.method="PUT",o.url+="/"+t.id);var n=r.injector(["ng"]).get("$http");if(void 0===n)throw new Error("Angular $http not resolved");return n(o).then(function(e){return e.data}).catch(function(r){var t="NGItemService.save() - Error saving item: "+r.message,o=new Error(t);return e.reject(o)})}},{key:"remove",value:function(t){var o={method:"DELETE",url:this.baseUrl+"/"+t},n=r.injector(["ng"]).get("$http");if(void 0===n)throw new Error("Angular $http not resolved");return n(o).catch(function(r){var t="NGItemService.remove() - Error deleting item: "+r.message,o=new Error(t);return e.reject(o)})}},{key:"patch",value:function(t,o){var n={method:"PATCH",url:this.baseUrl+"/"+t,data:o},i=r.injector(["ng"]).get("$http");if(void 0===i)throw new Error("Angular $http not resolved");return i(n).then(function(e){return e.data}).catch(function(r){var t="NGItemService.patch() - Error patching item: "+r.message,o=new Error(t);return e.reject(o)})}},{key:"search",value:function(t){var o=t;t&&void 0!==t.getQuery&&(o=t.getQuery());var n={method:"GET",url:this.baseUrl,data:o||{}},i=r.injector(["ng"]).get("$http");if(void 0===i)throw new Error("Angular $http not resolved");return i(n).then(function(e){return e.data}).catch(function(r){var t="NGItemService.search() - Error searching items: "+r.message,o=new Error(t);return e.reject(o)})}}]),o}()}),function(e,r){"function"==typeof define&&define.amd?define(["q","angular","GeoPlatform","NGItemService"],function(t,o,n,i){return e.NGServiceService=r(t,o,n,i)}):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e.NGServiceService=r(require("q"),require("angular"),require("GeoPlatform"),require("NGItemService")):GeoPlatform.NGServiceService=r(Q,angular,GeoPlatform,GeoPlatform.NGItemService)}(window,function(e,r,t,o){return function(o){function n(){_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.baseUrl=t.ualUrl+"/api/services",e}return _inherits(n,o),_createClass(n,[{key:"about",value:function(t){if(!t){var o=new Error("Must provide service to get metadata about");return e.reject(o)}var n={method:"POST",url:this.baseUrl+"/about",data:t},i=r.injector().get("$http");if(void 0===i)throw new Error("Angular $http not resolved");return i(n).catch(function(r){var t="NGServiceService.get() - Error describing service: "+r.message,o=new Error(t);return e.reject(o)})}}]),n}(o)}),function(e,r){"function"==typeof define&&define.amd?define(["q","angular","GeoPlatform","NGItemService"],function(t,o,n,i){return e.NGLayerService=r(t,o,n,i)}):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e.NGLayerService=r(require("q"),require("angular"),require("GeoPlatform"),require("NGItemService")):GeoPlatform.NGLayerService=r(Q,angular,GeoPlatform,GeoPlatform.NGItemService)}(window,function(e,r,t,o){return function(o){function n(){_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.baseUrl=t.ualUrl+"/api/layers",e}return _inherits(n,o),_createClass(n,[{key:"style",value:function(){var t=this.baseUrl+"/"+id+"/style",o=r.injector().get("$http");if(void 0===o)throw new Error("Angular $http not resolved");return o.get(t).catch(function(r){var t="GeoPlatform.NGLayerService.style() - Error getting layer style: "+r.message,o=new Error(t);return e.reject(o)})}},{key:"describe",value:function(t){if(!t){var o=new Error("Must provide describe options");return e.reject(o)}var n=["bbox","height","width","x","y"],i=n.find(function(e){return!t[e]});if(i)return e.reject(new Error("Must specify "+i+" in describe options"));var a={srs:"EPSG:4326",bbox:t.bbox,height:t.height,width:t.width,info_format:"text/xml",x:t.x,y:t.y,i:t.x,j:t.y},u={method:"GET",url:this.baseUrl+"/"+id+"/describe",data:a},c=r.injector().get("$http");if(void 0===c)throw new Error("Angular $http not resolved");return c(u).catch(function(r){var t="GeoPlatform.NGLayerService.get() - Error describing layer feature: "+r.message,o=new Error(t);return e.reject(o)})}}]),n}(o)}),function(e,r){"function"==typeof define&&define.amd?define(["q","angular","GeoPlatform","NGItemService"],function(t,o,n,i){return e.NGMapService=r(t,o,n,i)}):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e.NGMapService=r(require("q"),require("angular"),require("GeoPlatform"),require("NGItemService")):GeoPlatform.NGMapService=r(Q,angular,GeoPlatform,GeoPlatform.NGItemService)}(window,function(e,r,t,o){return function(e){function r(){_classCallCheck(this,r);var e=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return e.baseUrl=t.ualUrl+"/api/maps",e}return _inherits(r,e),r}(o)});